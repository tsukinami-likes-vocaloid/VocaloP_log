<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>VocaloP Atlas</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&family=Zen+Kaku+Gothic+New:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="bg-orbit" aria-hidden="true"></div>
    <div class="bg-grid" aria-hidden="true"></div>
    <main class="app">
      <header class="hero">
        <div class="hero-copy">
          <p class="eyebrow">VocaloP Atlas 2026</p>
          <h1>チャンネル登録者1万人超のボカロP記録</h1>
          <p class="lead">
            data.jsonの記録をもとに、名前・よみがな・登録者数・タグをまとめて閲覧できます。
          </p>
        </div>
      </header>

      <section class="controls">
        <label class="search" for="search-input">
          <span>検索</span>
          <input
            id="search-input"
            type="search"
            placeholder="名前 / よみがな / タグ"
            autocomplete="off"
          />
        </label>
        <label class="select" for="sort-select">
          <span>並び替え</span>
          <select id="sort-select">
            <option value="subs-desc">登録者数 多い順</option>
            <option value="subs-asc">登録者数 少ない順</option>
            <option value="name-asc">名前 (A-Z / あ-ん)</option>
          </select>
        </label>
        <div class="tag-filter" id="tag-filter" aria-label="タグ">
          <!-- tag buttons injected here -->
        </div>
      </section>

      <section class="summary">
        <p id="summary-text">読み込み中...</p>
      </section>

      <section id="grid" class="grid" aria-live="polite"></section>
      <p id="empty" class="empty" hidden>一致するチャンネルがありません。</p>
    </main>

    <template id="card-template">
      <article class="card">
        <div class="avatar-wrap">
          <img class="avatar" alt="" loading="lazy" />
        </div>
        <div class="card-body">
          <div class="card-head">
            <h2 class="name"></h2>
            <span class="reading"></span>
          </div>
          <div class="meta">
            <span class="subs"></span>
          </div>
          <div class="tags"></div>
          <p class="desc"></p>
          <a class="visit" target="_blank" rel="noopener">YouTubeを開く</a>
        </div>
      </article>
    </template>

    <div id="detail-modal" class="modal" hidden>
      <div class="modal-backdrop" data-close="true"></div>
      <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="detail-name">
        <button class="modal-close" type="button" data-close="true" aria-label="閉じる">
          &times;
        </button>
        <div class="modal-header">
          <img id="detail-icon" class="modal-avatar" alt="" />
          <div>
            <h2 id="detail-name" class="modal-name"></h2>
            <p id="detail-reading" class="modal-reading"></p>
          </div>
        </div>
        <p id="detail-subs" class="modal-subs"></p>
        <div id="detail-tags" class="modal-tags"></div>
        <div class="modal-chart-head">
          <span>登録者数の推移</span>
          <div class="modal-chart-controls">
            <div id="history-source-toggle" class="toggle" role="group" aria-label="履歴データ">
              <button type="button" data-source="history.json">history.json</button>
              <button type="button" data-source="history.compacted.json">history.compacted.json</button>
            </div>
            <span id="detail-history-range" class="modal-chart-range"></span>
          </div>
        </div>
        <div class="modal-chart">
          <svg
            id="detail-chart"
            class="modal-chart-svg"
            viewBox="0 0 320 120"
            preserveAspectRatio="xMidYMid meet"
            aria-hidden="true"
          ></svg>
          <div id="detail-history-tooltip" class="modal-chart-tooltip" hidden></div>
          <p id="detail-history-empty" class="modal-history-empty" hidden>
            履歴がまだありません。
          </p>
        </div>
        <p id="detail-desc" class="modal-desc"></p>
        <a id="detail-link" class="modal-link" target="_blank" rel="noopener">YouTubeを開く</a>
      </div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
