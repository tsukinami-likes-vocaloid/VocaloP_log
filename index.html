<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>VocaloP Atlas</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&family=Zen+Kaku+Gothic+New:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="bg-orbit" aria-hidden="true"></div>
    <div class="bg-grid" aria-hidden="true"></div>
    <main class="app">
      <header class="hero">
        <div class="hero-copy">
          <p class="eyebrow">VocaloP Atlas 2026</p>
          <h1>チャンネル登録者1万人超のボカロP記録</h1>
          <p class="lead">
            data.jsonの記録をもとに、名前・よみがな・登録者数・タグをまとめて閲覧できます。
          </p>
        </div>
      </header>

      <section class="controls">
        <label class="search" for="search-input">
          <span>検索</span>
          <input
            id="search-input"
            type="search"
            placeholder="名前 / よみがな / タグ"
            autocomplete="off"
          />
        </label>
        <label class="select" for="sort-select">
          <span>並び替え</span>
          <select id="sort-select">
            <option value="subs-desc">登録者数 多い順</option>
            <option value="subs-asc">登録者数 少ない順</option>
            <option value="name-asc">名前 (A-Z / あ-ん)</option>
          </select>
        </label>
        <div class="tag-filter" id="tag-filter" aria-label="タグ">
          <!-- tag buttons injected here -->
        </div>
      </section>

      <section class="summary">
        <p id="summary-text">読み込み中...</p>
      </section>

      <section id="grid" class="grid" aria-live="polite"></section>
      <p id="empty" class="empty" hidden>一致するチャンネルがありません。</p>
    </main>

    <template id="card-template">
      <article class="card">
        <div class="avatar-wrap">
          <img class="avatar" alt="" loading="lazy" />
        </div>
        <div class="card-body">
          <div class="card-head">
            <h2 class="name"></h2>
          </div>
          <div class="meta">
            <span class="subs"></span>
          </div>
          <div class="tags"></div>
        </div>
      </article>
    </template>

    <div id="detail-modal" class="modal" hidden>
      <div class="modal-backdrop" data-close="true"></div>
      <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="detail-name">
        <button class="modal-close" type="button" data-close="true" aria-label="閉じる">
          &times;
        </button>
        <div class="modal-header">
          <img id="detail-icon" class="modal-avatar" alt="" />
          <div>
            <h2 id="detail-name" class="modal-name"></h2>
            <p id="detail-reading" class="modal-reading"></p>
          </div>
        </div>
        <div class="modal-meta">
          <p id="detail-subs" class="modal-subs"></p>
          <a id="detail-link" class="modal-link" target="_blank" rel="noopener">
            <svg class="modal-link-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>
            YouTubeを開く
          </a>
        </div>
        <div id="detail-tags" class="modal-tags"></div>
        <details class="chart-details" open>
          <summary class="chart-summary">
            <span>登録者数の推移</span>
            <svg class="chart-accordion-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
          </summary>
          <div class="modal-chart">
            <div class="modal-chart-controls">
              <div id="history-source-toggle" class="toggle" role="group" aria-label="履歴データ">
                <button type="button" data-source="history.json">history.json</button>
                <button type="button" data-source="history.compacted.json">history.compacted.json</button>
              </div>
              <span id="detail-history-range" class="modal-chart-range"></span>
            </div>
            <svg
              id="detail-chart"
              class="modal-chart-svg"
              viewBox="0 0 320 120"
              preserveAspectRatio="xMidYMid meet"
              aria-hidden="true"
            ></svg>
            <div id="detail-history-tooltip" class="modal-chart-tooltip" hidden></div>
            <p id="detail-history-empty" class="modal-history-empty" hidden>
              履歴がまだありません。
            </p>
          </div>
        </details>
        <h3 class="modal-section-title">詳細</h3>
        <p id="detail-desc" class="modal-desc"></p>
      </div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
